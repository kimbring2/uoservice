syntax = "proto3";

package uoservice;

message Empty {}

message GrpcClilocData {
  uint32 serial = 1;
  string text = 2;
  string affix = 3;
  string name = 4;
}

message GrpcGameObjectData {
  string type = 1;
  uint32 distance = 2;
  uint32 gameX = 3;
  uint32 gameY = 4;
  uint32 serial = 5;
  string name = 6;
  bool isCorpse = 7;
  string title = 8;
  uint32 amount = 9;
  uint32 price = 10;
  uint32 layer = 11;
}

message GrpcSkill {
  string name = 1;
  uint32 index = 2;
  bool isClickable = 3;
  uint32 value = 4;
  uint32 base = 5;
  uint32 cap = 6;
  uint32 lock = 7;
}

message GrpcPlayerStatus {
  uint32 str = 1;
  uint32 dex = 2;
  uint32 intell = 3;

  uint32 hits = 4;
  uint32 hitsMax = 5;
  uint32 stamina = 6;
  uint32 staminaMax = 7;
  uint32 mana = 8;
  uint32 manaMax = 9;

  uint32 gold = 10;
  uint32 physicalResistance = 11;
  uint32 weight = 12;
  uint32 weightMax = 13;
}

message GrpcPlayerStatusEtc {
  uint32 holdItemSerial = 1;
  bool warMode = 2;
}

message GrpcGameObjectInfoList {
  repeated uint32 gameXs = 1;
  repeated uint32 gameYs = 2;
}

message GrpcPopupMenuList {
  repeated string menus = 1;
}

message GrpcClilocDataList {
  repeated GrpcClilocData clilocDatas = 1;
}

message GrpcGameObjectList {
  repeated GrpcGameObjectData gameObjects = 1;
}

message SemaphoreAction {
  string mode = 1;
}

message Config {
  bool init = 1;
}

message GrpcSkillList {
  repeated GrpcSkill skills = 1;
}

message GrpcContainerData {
  uint32 containerSerial = 1;
  GrpcSerialList containerItemSerialList = 2;
}

message GrpcContainerDataList {
  repeated GrpcContainerData containers = 1;
}

message GrpcSerialList {
  repeated uint32 serials = 1;
}

message States {
  GrpcGameObjectList WorldItemList = 1;
  GrpcGameObjectList WorldMobileList = 2;

  GrpcSerialList equippedItemSerialList = 3;
  GrpcSerialList backpackItemSerialList = 4;
  GrpcSerialList bankItemSerialList = 5;
  GrpcSerialList vendorItemSerialList = 6;

  GrpcContainerDataList openedCorpseList = 7;
  GrpcPlayerStatus playerStatus = 8;

  GrpcPopupMenuList popupMenuList = 9;

  GrpcClilocDataList clilocDataList = 10;

  Actions replayActions = 11;

  GrpcGameObjectInfoList staticObjectInfoList = 12;

  GrpcSkillList playerSkillList = 13;

  GrpcPlayerStatusEtc playerStatusEtc = 14;
}

message Actions {
  uint32 actionType = 1;
  uint32 itemSerial = 2;
  uint32 mobileSerial = 3;
  uint32 walkDirection = 4;
  uint32 index = 5;
  uint32 amount = 6;
  bool run = 7;
}

service UoService {
  rpc Reset (Config) returns (States);
  rpc ReadObs (Config) returns (States);
  rpc WriteAct (Actions) returns (Empty);
  rpc ActSemaphoreControl (SemaphoreAction) returns (Empty);
  rpc ObsSemaphoreControl (SemaphoreAction) returns (Empty);

  rpc ReadReplay (Config) returns (States);
  rpc ReadMPQFile (Config) returns (Empty);
}