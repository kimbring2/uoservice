syntax = "proto3";

package uoservice;

message Empty {}

message GrpcMobileData {
  string name = 1;
  float x = 2;
  float y = 3;
  uint32 race = 4;
  uint32 serial = 5;
}

message SemaphoreAction {
  string mode = 1;
}

message GrpcMobileList {
  repeated GrpcMobileData mobile = 1;
}

message Config {
  string name = 1;
}

message ScreenImage {
  bytes image = 1;
}

message Rewards {
  float attackMonster = 1;
  float killMonster = 2;
}

message States {
  ScreenImage screenImage = 1;
  GrpcMobileList mobileList = 2;
  Rewards rewards = 3;
}

message WalkDirection {
  uint32 direction = 1;
}

message Actions {
  uint32 actionType = 1;
  uint32 mobileSerial = 2;
  WalkDirection walkDirection = 3;
}

service UoService {
  rpc Reset (Config) returns (States);
  rpc ReadObs (Config) returns (States);
  rpc WriteAct (Actions) returns (Empty);
  rpc ActSemaphoreControl (SemaphoreAction) returns (Empty);
  rpc ObsSemaphoreControl (SemaphoreAction) returns (Empty);
}